{% extends 'base.html' %}
{% block content %}
<body class="bg-gray-100 dark:text-steel text-[#222222]">
    <!-- Blog Post Wrapper -->
    <div class="max-w-screen-md px-4 py-8 mx-auto">
        <!-- Thinner Centered Bar -->
        <div class="dark:bg-[#444444] bg-[#CCCCCC] rounded-3xl shadow-2xl dark:shadow-white p-6 mx-auto">
            <!-- Title Section -->
            <div class="text-center">
                <h1 class="text-6xl font-extrabold leading-tight text-cs-green">
                    Revised Lab: Designing Filters
                </h1>
                <h2 class="text-2xl text-bold leading-tight text-cs-green">
                    Design low, high, and band-pass filters and passive filter order
                </h1>
                 <!-- Separator -->
                <div class="h-px bg-cs-green my-6"></div>
                <a href="#overview" class="inline-block bg-cs-blue hover:bg-blue-700  hover:underline px-4 py-1 rounded-lg font-medium transition-all duration-300 border-[#333333] border">
                    Overview
                </a> >>
                <a href="#filtering" class="inline-block bg-cs-blue hover:bg-blue-700 hover:underline px-4 py-1 rounded-lg font-medium transition-all duration-300 border-[#333333] border">
                    Filtering
                </a> >>
                <a href="#design" class="inline-block bg-cs-blue hover:bg-blue-700 hover:underline px-4 py-1 rounded-lg font-medium transition-all duration-300 border-[#333333] border">
                    Design
                </a> >>
                <a href="#assignment" class="inline-block bg-cs-blue hover:bg-blue-700 hover:underline px-4 py-1 rounded-lg font-medium transition-all duration-300 border-[#333333] border">
                    Assignment
                </a> >>
                <a href="#conclusion" class="inline-block bg-cs-blue hover:bg-blue-700 hover:underline px-4 py-1 rounded-lg font-medium transition-all duration-300 border-[#333333] border">
		            Conclusion
                </a>
            </div>

            <!-- Blog Content -->
            <div class="h-px bg-cs-green my-6"></div><h1 id="overview" class="text-4xl font-extrabold">Overview</h1><br/>
            <p class="leading-relaxed text-lg">Welcome to your shiny new revised lab for ECE2170. Here, you will learn everything you need to know to make and test passive filters. These are real-world skills you will see in the industry and may show up in technical interviews for internships.</p><br/>
            
            <div class="h-px bg-cs-green my-6"></div><h1 id="filtering" class="text-4xl font-extrabold">Passive Filtering</h1><br/>
            <p class="leading-relaxed text-lg">Passive filtering is creating a filter using only "passive" components (resistors, capacitors, and inductors). These are almost exclusively used for low-pass, high-pass, band-pass, and band-stop filters. You should know what each of these do from lecture. What's great about passive filtering is that it <a class="italic">requires no extra power</a>. Passive components don't need powering, so pushing a signal through them is a very energy efficient way to filter out unwanted signals.</p><br/>
            
            <p class="leading-relaxed text-lg">The negatives of passive filtering is that they are not very strong. The cutoff for a passive filter has a very long slope compared to what you would like to see in an ideal filter. Take these images of an ideal low-pass filter and what a passive low-pass filter achieves:</p><br/>
            
            <div class="flex justify-center">
                <img src="/static/images/featured/ECE2170/photo2.png" alt="Image not Loading, see TA" class="md:w-4/5 w-1/2 rounded-lg shadow-lg">
            </div>
            <p class="leading-relaxed text-lg">Ideal Low Pass ^</p>
            
            <div class="flex justify-center">
                <img src="/static/images/featured/ECE2170/photo1.png" alt="Image not Loading, see TA" class="md:w-4/5 w-1/2 rounded-lg shadow-lg">
            </div>
            <p class="leading-relaxed text-lg">Real Low Pass ^</p>
            
            <p class="leading-relaxed text-lg">What is the slope of a passive filter's cutoff? -20 dB/decade. That's you magic number. This means that every decade (1 Hz, 10 Hz, 100 Hz, 1000 Hz ...) of the frequency after the filter starts to take effect, the output of the filter drops by 20 dB. </p><br/>
            
            <p class="leading-relaxed text-lg">How do we identify the point where the filter officially "cut's off?" In the ideal image above, it is very easy to say that the filter allows all frequencies to the left of the vertical line to pass and removes all frequencies to the right. What about the passive filter? At what frequency is it "allowing" the signal to go through vs stoppin it? -3 dB. That's your magic number. This is the cutoff frequency of any -pass filter, where the output hits -3dB. -3dB is where the output is half the amplitude of the input, so it is also called the "halfway point."</p><br/>
            
            <div class="h-px bg-cs-green my-6"></div><h1 id="msf" class="text-4xl font-extrabold">Multi-stage Filtering</h1><br/>
            <p class="leading-relaxed text-lg">Above, we were just talking about single stage passive filters. But there are multi stage filters as well. If you chain together multiple passive filters in a row, you will get the sum of all the filters as the output. So if you put a low-pass filter in the same line as a high-pass filter, the output will look like a band-pass filter with the low cutoff frequency as the high-pass filter's output and the high cutoff frequency as the low-pass filter's frequency. This is how you make more complex filters.</p><br/>
            
            <p class="leading-relaxed text-lg">What if you put two of the same low-pass filters in a row? You get double the effect. So instead of -20 dB/decade of cutoff, you get -40 dB/decade. This is a steeper slope and looks closer to the ideal filter output in the image above. You can chain as many passive filters together as needed to get the cutoff that you want. But often, a single stage is all you need. This is often called the "order" of the filter. A first-order filter is just one passive filter, a second order is two chained filters, a third order is three, and so on.</p><br/>
            
            <div class="h-px bg-cs-green my-6"></div><h1 id="design" class="text-4xl font-extrabold">How to Design Passive Filters</h1><br/>
            <p class="leading-relaxed text-lg">Here is where the actual work comes in. </p><br/>
            
            <h2 class="text-2xl text-bold underline text-cs-green">Voltage Dividers</h2>
            <p class="leading-relaxed text-lg">First, here is a review of Voltage Dividers, which you should have seen in Circuit Theory (but most people don't remember them or don't know how to apply them). A voltage divider works by configuring two resistors in the configuration below:</p><br/>
            
            <div class="flex justify-center">
                <img src="/static/images/featured/ECE2170/photo3.png" alt="Image not Loading, see TA" class="md:w-4/5 w-1/2 rounded-lg shadow-lg">
            </div>
            
            <p class="leading-relaxed text-lg">If you apply a voltage in the top resistor and ground the second one, the voltage in between the two will be this equation:</p><br/>
            
            <div class="flex justify-center">
                <img src="/static/images/featured/ECE2170/photo4.png" alt="Image not Loading, see TA" class="md:w-4/5 w-1/2 rounded-lg shadow-lg">
            </div>
            
            <p class="leading-relaxed text-lg">Quick test: if the top resistor is 10kOhms, what resistor would you need on the bottom resistor for the output to be 1/3 the input voltage? Try it now.</p><br/>
            
            <p class="leading-relaxed text-lg">5kOhms. You should be able to estimate that number almost immediately without any calculations by hand. Ask Cooper for an anecdote if you want to know why and tips to do it faster.</p><br/>
            
            <h2 class="text-2xl text-bold underline text-cs-green">Resistors</h2>
            <p class="leading-relaxed text-lg">More importantly in the problem above, we have another issue: 5kOhms resistors don't exist. They don't make them. That's not a value that is manufactured for resistors. They make 4.7k resistors and 5.1k resistors, but not 5k. Why? If a manufacturer made every value of resistor between 0 and 1M, then they would go out of business. There is too many types to make and not enough demand for a 6.1k resistor or a 9.35k resistor to sell them. What values are made? E series, most often E12 or E24. Look up E24 resistors to see the most standard values of resistors you will work with.</p><br/>
            
            <p class="leading-relaxed text-lg">So, if they don't make 5k resistors, what do you do to make the voltage divider? Think about it for like 30 seconds before moving on.</p><br/>
            
            <p class="leading-relaxed text-lg">A novice ECE will say "I would put multiple resistors in series and parallel to get an equivalent resistance of 5kOhms." This is likely what you were thinking. A professional ECE will say "5.1k is pretty close, use that." </p><br/>
            
            <p class="leading-relaxed text-lg">The big thing here is that you don't often need exact numbers. Engineering is the process of working with restrictions and choosing which battles to fight. Real resistors don't come with exactly 5.1kOhms. They are sold as 5.1k +-5% (different E series also have different tolerances). So, I could use a resistor labeled as 5.1k, but it is actually anywhere between 4.85k and 5.35k. You can't control the exact value you will get, because small physical differences in each resistor causes slightly different resistances. Engineering is working with those and dealing with them. The good news is that, because all of the components you use have these random values within the 5% tolerance, they all kinda cancel out. In the end, you get something pretty close to what you want.</p><br/>
            
            <p class="leading-relaxed text-lg">Also, in a voltage divider, I gave you one of the values. What do you do if you have to pick both? You basically just choose an arbitrary starting value (often between 1k and 10k) and then try to find an appropriate E24 resistor to get the division you want. You may pick higher or lower values depending on your use case (low values are more power hungry but have less noise, and high values are very power efficient but greate more noise), but in general, 1k-10k is a good middle-value and will cover 95% of your cases.</p><br/>
            
            <h2 class="text-2xl text-bold underline text-cs-green">Capacitors</h2>
            <p class="leading-relaxed text-lg">You may remember from Circuit Theory that "capacitors behave as an open circuit in DC circuits." This is true, but not the interesting part. The best thing about capacitors is that their impedance/resistance <a class="italic">is dependent on frequency.</a> At DC, capacitors have infinite resistance. At 10 Hz, capacitors have a very high resistance. At 100 MHZ, capacitors have very low reisistance. This is a very, very useful property.</p><br/>
            
            <p class="leading-relaxed text-lg">The exact resistance/impedance that a capacitor has at a given frequency also depends on its value (capacitance). You can calculate it's resistance at a frequency using this formula:</p><br/>
            
            <div class="flex justify-center">
                <img src="/static/images/featured/ECE2170/photo5.png" alt="Image not Loading, see TA" class="md:w-4/5 w-1/2 rounded-lg shadow-lg">
            </div>
            
            <p class="leading-relaxed text-lg">One other thing to note is that capacitors also follow the same E series as resistors. So 6.8nF capacitors exist in E24, but not 7nF, etc.</p><br/>
            
            <h2 class="text-2xl text-bold underline text-cs-green">Putting it Together</h2>
            <p class="leading-relaxed text-lg">Now, given what you have learned about capacitors and voltage dividers, here is your first assignment. Design me a low-pass filter. The filter should have a cutoff frequency (divide the output frequency in half) at 1kHz. Test your design with a few numbers to make sure it works. Once you have a design, show it to Cooper for approval before moving onto the next step.</p><br/>
            
            <p class="leading-relaxed text-lg">The next step is to do the same, but with a high-pass filter. The cutoff frequency should be 15kHz this time. Again, show Cooper for approval before moving on.</p><br/>
            
            <p class="leading-relaxed text-lg">Now, make a band-pass and a band-stop filter. Do not find any values for these, just show the structure that it would be and once again, check wit Cooper to make sure it is right.</p><br/>
            
            <div class="h-px bg-cs-green my-6"></div><h1 id="assignment" class="text-4xl font-extrabold">Implementation/Assignment</h1><br/>
            <p class="leading-relaxed text-lg">You have your design. Now it is time for the fun part: physically making it and testing it's functionality. Cooper has some components for you, and you should build your design on a breadboard. If you do not know how to use a breadboard, ask Cooper. The design you should build is a Band Pass filter that has cutoffs at 300Hz and 500Hz. Once you design and build your filter, bring it to Cooper to test. </p><br/>
            
            <div class="h-px bg-cs-green my-6"></div><h1 id="conclusion" class="text-4xl font-extrabold">Conclusion</h1><br/>
            <p class="leading-relaxed text-lg">In this lab, you learned the actual real-world skill of designing a filter for use in a system, the standard resistor values, estimation process, and testing an implementation of a design. All of these skills are things you will actually use in the field and may be asked to go over in techincal interviews for positions. If you have any questions about this lab, ECE in general, or honestly just anything, feel free to reach out. Thanks for joining me this semester, and good luck.</p><br/>


        </div>
    </div>        
</div>
    <!-- Feedback Box -->
    <div id="feedback-box" class="fixed hidden right-0 top-1/2 transform -translate-y-1/2 bg-gray-200 dark:bg-[#444444] border-l-4 border-b-4 border-[#E0E0E0] dark:border-[#3B3B3B] rounded-l-xl shadow-lg w-64 p-4 z-50">
        <h2 class="font-bold text-lg dark:text-white text-gray-800 mb-2 text-center">Feedback</h2>
        <textarea id="feedback-text" class="w-full p-2 border rounded-md dark:bg-[#333333] dark:text-steel text-gray-800" rows="4" placeholder="Feedback, corrections, feature ideas, comments, etc."></textarea>
        <button id="submit-feedback" class="mt-2 w-full bg-cs-blue hover:bg-cs-green text-white py-2 px-4 rounded-md">Submit</button>
    </div>

    <!-- Toggle Tab -->
    <button id="feedback-toggle" class="fixed top-1/2 transform -translate-y-1/2 right-0 md:right-64 bg-cs-blue hover:bg-cs-green text-steel rounded-l-md px-1 py-8 shadow-md">
        ||
    </button>

    <!--
    <body class="flex justify-center items-center h-screen bg-gray-100">
        <div class="bg-white p-6 rounded shadow-lg">
            <h1 class="text-2xl mb-4">Report a Problem</h1>
            <form action="/submit_workorder" method="post">
                <textarea name="issue" required class="border p-2 w-full rounded" placeholder="Describe your issue..."></textarea>
                <button type="submit" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded">Submit</button>
            </form>
        </div>
    </body>
    -->

    <script>
        const feedbackBox = document.getElementById('feedback-box');
        const feedbackToggle = document.getElementById('feedback-toggle');
        const feedbackText = document.getElementById('feedback-text');
        const submitFeedback = document.getElementById('submit-feedback');
        
        function checkScreenSize() {
            const isLargerThanMD = window.matchMedia('(min-width: 768px)').matches;

            if (isLargerThanMD) {
                feedbackBox.classList.remove('hidden');
                feedbackToggle.classList.remove('right-0');
                feedbackToggle.classList.add('md:right-64', 'right-64'); // Move next to the feedback box
            } else {
                feedbackBox.classList.add('hidden');
                feedbackToggle.classList.remove('md:right-64', 'right-64');
                feedbackToggle.classList.add('right-0');
            }
        }

        // Initial check when the page loads
        checkScreenSize();

        // Listen for window resize events to detect screen size changes
        window.addEventListener('resize', checkScreenSize);

        // Collapse/Expand Feedback Box
        feedbackToggle.addEventListener('click', () => {
            feedbackBox.classList.toggle('hidden');
            // Adjust the position of the toggle tab
            if (feedbackBox.classList.contains('hidden')) {
                feedbackToggle.classList.remove('md:right-64', 'right-64');
                feedbackToggle.classList.add('right-0'); // Move to the far right
                feedbackBox.classList.remove('md:block');
            } else {
                feedbackToggle.classList.remove('right-0');
                feedbackToggle.classList.add('md:right-64', 'right-64'); // Move next to the feedback box
            }
        });

        // Submit Feedback Function
        const submitFeedbackHandler = () => {
            const feedback = feedbackText.value.trim();
            if (feedback) {
                fetch('/submit-feedback', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ feedback, url: "/" + window.location.pathname.split('/').pop() }), // Ensure `feedback` is a valid variable
            })
            .then(async response => {
                if (response.ok) {
                    // Clear the input and thank the user
                    feedbackText.value = ''; // Ensure `feedbackText` is defined
                    submitFeedback.innerText = 'Thank you!'; // Change the button text
                    submitFeedback.classList.remove('bg-cs-blue'); // Remove original color
                    submitFeedback.classList.add('bg-cs-green'); // Add new color (green for success)

                    setTimeout(() => {
                        submitFeedback.innerText = 'Submit'; // Revert the button text after 3 seconds
                        submitFeedback.classList.remove('bg-cs-green'); // Remove green color
                        submitFeedback.classList.add('bg-cs-blue');
                    }, 3000); // 3000ms = 3 seconds
                } else {
                    // Attempt to read the error message from the server
                    const errorData = await response.json();
                    alert(`Error submitting feedback: ${errorData.details || 'Unknown error occurred'}. Please provide these details to Cooper :)`);
                }
            })
            .catch(error => {
                // Log the error for debugging and notify the user
                console.error('Submission error:', error);
                alert('An error occurred. Please try again.');
            });
            }
        };

        // Submit Feedback on Button Click
        submitFeedback.addEventListener('click', submitFeedbackHandler);

        // Submit Feedback on CMD+Enter or CTRL+Enter
        feedbackText.addEventListener('keydown', (event) => {
            if ((event.metaKey || event.ctrlKey) && event.key === 'Enter') {
                submitFeedbackHandler();
            }
        });
    </script>
</body>
{% endblock %}


<!--
                <h2>Blockquote Example</h2>
                <blockquote class="border-l-4 border-cs-blue italic pl-4 text-cs-green">
                    "This is an example of a blockquote. It's perfect for highlighting important points or quotes."
                </blockquote>

                <h2>Code Snippet Example</h2>
                <p>
                    Below is an example of a simple Python function:
                </p>
                <pre class="dark:bg-gray-600 bg-gray-400 rounded-lg p-4 shadow-2xl overflow-auto">
def greet(name):
    return f"Hello, {name}!"

print(greet("World"))
                </pre>


<code class="bg-cs-blue px-1 rounded shadow-lg text-base">

</code>
-->

